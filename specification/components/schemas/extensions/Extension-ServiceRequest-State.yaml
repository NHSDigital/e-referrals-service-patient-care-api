title: Extension-ServiceRequest-State
description: Extension to supply the e-RS representation of the state of the referral.
type: object
required:
  - url
  - extension
properties:
  url:
    type: string
    enum:
      - 'https://fhir.nhs.uk/StructureDefinition/Extension-eRS-ServiceRequest-State'
    example: 'https://fhir.nhs.uk/StructureDefinition/Extension-eRS-ServiceRequest-State'
  extension:
    type: array
    minItems: 1
    maxItems: 3
    description: |
      
      | Field                                      | Cardinality | Notes                                                                 |
      | ------------------------------------------ | ----------- | --------------------------------------------------------------------- |
      | `ServiceRequest-State`                     | `1..1`      |  Code for the ServiceRequest state                      |
      | `ServiceRequest-Cancellation-Reason`       | `0..1`      |  Code for the ServiceRequest cancellation reason - only returned for CANCELLED Service Requests |
      | `ServiceRequest-StatusChanged`             | `0..1`      |  Code for the ServiceRequest last changed date - only returned for CANCELLED Service Requests   |
    items:
      anyOf:
        - $ref: '../codings/ServiceRequest-State.yaml'
        - $ref: '../codings/ServiceRequest-Cancellation-Reason.yaml'
        - $ref: '../codings/ServiceRequest-StatusChanged.yaml'  
